{
  "data": [
    {
      "title": "使用KVM虚拟机并配置桥接网络",
      "paragraphs": [
        {
          "context": "在deepin下使用KVM虚拟机，首先需安装所需软件包，命令为：sudo apt-get install qemu-kvm libvirt-clients libvirt-daemon-system",
          "qas": [
            {
              "id": "5-165-1",
              "question": "在deepin下使用KVM虚拟机，首先安装所需软件包的命令是什么？",
              "answers": [
                {
                  "text": "sudo apt-get install qemu-kvm libvirt-clients libvirt-daemon-system",
                  "answer_start": 32
                }
              ]
            },
            {
              "id": "5-165-2",
              "question": "在deepin系统安装KVM需要哪些核心软件包？",
              "answers": [
                {
                  "text": "qemu-kvm libvirt-clients libvirt-daemon-system",
                  "answer_start": 28
                }
              ]
            }
          ]
        },
        {
          "context": "安装KVM相关软件包后，需将当前用户添加到libvirt用户组，命令为：sudo adduser uos libvirt，其中需将uos替换成自己的用户名，目的是使当前用户可直接管理虚拟机无需提权",
          "qas": [
            {
              "id": "5-165-3",
              "question": "安装KVM相关软件包后，为使当前用户无需提权即可管理虚拟机，需执行什么命令？该命令中需替换的内容是什么？",
              "answers": [
                {
                  "text": "sudo adduser uos libvirt，需将uos替换成自己的用户名",
                  "answer_start": 36
                }
              ]
            },
            {
              "id": "5-165-4",
              "question": "如何将用户加入libvirt组？",
              "answers": [
                {
                  "text": "sudo adduser uos libvirt",
                  "answer_start": 70
                }
              ]
            }
          ]
        },
        {
          "context": "验证当前用户是否可以管理KVM虚拟机的命令是：sudo virsh list --all",
          "qas": [
            {
              "id": "5-165-5",
              "question": "如何验证当前用户是否可以管理KVM虚拟机？",
              "answers": [
                {
                  "text": "sudo virsh list --all",
                  "answer_start": 23
                }
              ]
            }
          ]
        },
        {
          "context": "管理KVM虚拟机的图形界面工具是virt-manager，通过命令sudo apt-get install virt-manager安装，安装后可在应用程序菜单找到该工具",
          "qas": [
            {
              "id": "5-165-6",
              "question": "管理KVM虚拟机的图形界面工具是什么？如何安装该工具？安装后在哪里可找到它？",
              "answers": [
                {
                  "text": "图形界面工具是virt-manager，安装命令为sudo apt-get install virt-manager，安装后可在应用程序菜单找到",
                  "answer_start": 16
                }
              ]
            },
            {
              "id": "5-165-7",
              "question": "安装virt-manager的命令是什么？",
              "answers": [
                {
                  "text": "sudo apt-get install virt-manager",
                  "answer_start": 139
                }
              ]
            }
          ]
        },
        {
          "context": "配置KVM桥接网络的第一步是安装开启桥接接口所需工具，命令为：sudo apt-get install bridge-utils",
          "qas": [
            {
              "id": "5-165-8",
              "question": "配置KVM桥接网络的第一步是什么？对应的执行命令是什么？",
              "answers": [
                {
                  "text": "第一步是安装开启桥接接口所需工具，命令为sudo apt-get install bridge-utils",
                  "answer_start": 14
                }
              ]
            }
          ]
        },
        {
          "context": "安装bridge-utils后，可使用brctl命令管理桥接接口，创建名为br0的桥接接口命令为sudo brctl addbr br0，查看系统所有桥接接口命令为sudo brctl show",
          "qas": [
            {
              "id": "5-165-9",
              "question": "安装bridge-utils后，如何创建名为br0的桥接接口？如何查看系统上所有的桥接接口？",
              "answers": [
                {
                  "text": "创建br0桥接接口的命令是sudo brctl addbr br0，查看所有桥接接口的命令是sudo brctl show",
                  "answer_start": 33
                }
              ]
            },
            {
              "id": "5-165-10",
              "question": "创建桥接接口br0的命令是什么？",
              "answers": [
                {
                  "text": "sudo brctl addbr br0",
                  "answer_start": 40
                }
              ]
            }
          ]
        },
        {
          "context": "将物理网卡接口加入br0桥接接口的命令为sudo brctl addif br0 enp0s25，其中需将enp0s25替换成自己的网络接口名称",
          "qas": [
            {
              "id": "5-165-11",
              "question": "如何将物理网卡接口加入到br0桥接接口中？该命令中需替换的内容是什么？",
              "answers": [
                {
                  "text": "命令为sudo brctl addif br0 enp0s25，需将enp0s25替换成自己的网络接口名称",
                  "answer_start": 20
                }
              ]
            },
            {
              "id": "5-165-12",
              "question": "如何将物理网卡加入桥接接口？",
              "answers": [
                {
                  "text": "sudo brctl addif br0 enp0s25",
                  "answer_start": 75
                }
              ]
            }
          ]
        },
        {
          "context": "执行sudo brctl show命令可查看物理网卡接口是否已加入br0，若输出中br0对应的interfaces列显示enp0s25，则说明已加入",
          "qas": [
            {
              "id": "5-165-13",
              "question": "如何确认物理网卡接口已加入br0桥接接口？输出中哪个信息可作为确认依据？",
              "answers": [
                {
                  "text": "执行sudo brctl show命令确认，输出中br0对应的interfaces列显示目标物理网卡接口（如enp0s25）即可确认",
                  "answer_start": 2
                }
              ]
            }
          ]
        },
        {
          "context": "配置桥接接口IP和网关的步骤：1.删除物理网卡IP：sudo ip addr del dev enp0s25 192.168.1.8/24（替换接口和IP）；2.添加IP到br0：sudo ip addr add 192.168.1.8/24 dev br0（替换IP）；3.开启br0：sudo ip link set up br0；4.添加默认网关：sudo route add default gw 192.168.1.1（替换网关）",
          "qas": [
            {
              "id": "5-165-14",
              "question": "配置桥接接口br0的IP地址和默认网关需执行哪些步骤？各步骤对应的命令及需替换的内容是什么？",
              "answers": [
                {
                  "text": "1.删除物理网卡IP：sudo ip addr del dev enp0s25 192.168.1.8/24（替换接口和IP）；2.添加IP到br0：sudo ip addr add 192.168.1.8/24 dev br0（替换IP）；3.开启br0：sudo ip link set up br0；4.添加默认网关：sudo route add default gw 192.168.1.1（替换网关）",
                  "answer_start": 15
                }
              ]
            },
            {
              "id": "5-165-15",
              "question": "如何将IP地址转移到桥接接口？",
              "answers": [
                {
                  "text": "sudo ip addr del dev enp0s25 192.168.1.8/24 && sudo ip addr add 192.168.1.8/24 dev br0",
                  "answer_start": 121
                }
              ]
            }
          ]
        },
        {
          "context": "在virt-manager中配置虚拟机为桥接模式，需将虚拟机网络设置为创建的br0桥接接口，同时需执行命令iptables -A FORWARD -p all -i br0 -j ACCEPT开启转发",
          "qas": [
            {
              "id": "5-165-16",
              "question": "在virt-manager中如何将虚拟机配置为桥接模式？还需执行什么命令以开启转发功能？",
              "answers": [
                {
                  "text": "将虚拟机网络设置为br0桥接接口，开启转发的命令为iptables -A FORWARD -p all -i br0 -j ACCEPT",
                  "answer_start": 26
                }
              ]
            },
            {
              "id": "5-165-17",
              "question": "启用网络转发的iptables命令是什么？",
              "answers": [
                {
                  "text": "iptables -A FORWARD -p all -i br0 -j ACCEPT",
                  "answer_start": 37
                }
              ]
            }
          ]
        },
        {
          "context": "恢复网络原状态的命令：1.关闭br0：sudo ip link set br0 down；2.删除br0中的物理网卡：sudo brctl delif br0 enp0s25；3.关闭物理网卡：sudo ip link set enp0s25 down；4.重启物理网卡：sudo ip link set up enp0s25",
          "qas": [
            {
              "id": "5-165-18",
              "question": "配置KVM桥接网络后，如何恢复网络原来的状态？需执行哪些命令？",
              "answers": [
                {
                  "text": "需执行4个命令：1.关闭br0：sudo ip link set br0 down；2.删除br0中的物理网卡：sudo brctl delif br0 enp0s25；3.关闭物理网卡：sudo ip link set enp0s25 down；4.重启物理网卡：sudo ip link set up enp0s25",
                  "answer_start": 11
                }
              ]
            },
            {
              "id": "5-165-19",
              "question": "如何从桥接接口移除物理网卡？",
              "answers": [
                {
                  "text": "sudo brctl delif br0 enp0s25",
                  "answer_start": 111
                }
              ]
            },
            {
              "id": "5-165-20",
              "question": "重启物理网卡的命令是什么？",
              "answers": [
                {
                  "text": "sudo ip link set up enp0s25",
                  "answer_start": 158
                }
              ]
            }
          ]
        },
        {
          "context": "KVM桥接网卡静态IP配置示例：auto lo\niface lo inet loopback\nauto br0\niface br0 inet static\nbridge_ports enp5s0f0\naddress 10.8.10.12\nnetmask 255.255.255.0\ngateway 10.8.10.1\nbridge_stp off\nbridge_fd 0\nbridge_maxwait 0",
          "qas": [
            {
              "id": "5-165-21",
              "question": "KVM桥接网卡的静态IP配置信息包含哪些内容（以示例为准）？",
              "answers": [
                {
                  "text": "包含：auto lo及iface lo inet loopback；auto br0及iface br0 inet static，其下有bridge_ports enp5s0f0、address 10.8.10.12、netmask 255.255.255.0、gateway 10.8.10.1、bridge_stp off、bridge_fd 0、bridge_maxwait 0",
                  "answer_start": 16
                }
              ]
            },
            {
              "id": "5-165-22",
              "question": "桥接配置文件中的物理网卡接口字段是什么？",
              "answers": [
                {
                  "text": "bridge_ports enp5s0f0",
                  "answer_start": 72
                }
              ]
            },
            {
              "id": "5-165-23",
              "question": "永久配置中如何指定桥接IP地址？",
              "answers": [
                {
                  "text": "address 10.8.10.12",
                  "answer_start": 97
                }
              ]
            },
            {
              "id": "5-165-24",
              "question": "如何禁用桥接的STP协议？",
              "answers": [
                {
                  "text": "bridge_stp off",
                  "answer_start": 154
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}