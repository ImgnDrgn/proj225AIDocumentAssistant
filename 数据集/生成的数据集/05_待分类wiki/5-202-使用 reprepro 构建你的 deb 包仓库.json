
{
  "data": [
    {
      "title": "使用 reprepro 构建你的 deb 包仓库",
      "paragraphs": [
        {
          "context": "reprepro 是用于管理 deb 格式软件包，生成用于分发的仓库管理工具。支持 .dsc/.deb/.udeb 等格式；会生成 Packages/Sources 文件及压缩版本，并对 Release 进行处理（可生成 Release.gpg）。",
          "qas": [
            {
              "question": "reprepro 是什么工具？",
              "id": "5-202-1",
              "answers": [
                {
                  "text": "用于管理 deb 格式软件包，生成用于分发的仓库管理工具。",
                  "answer_start": 0
                }
              ]
            },
            {
              "question": "reprepro 支持哪些格式的文件？",
              "id": "5-202-2",
              "answers": [
                {
                  "text": ".dsc/.deb/.udeb 等格式",
                  "answer_start": 36
                }
              ]
            }
          ]
        },
        {
          "context": "搭建本地 apt 仓库需要 gpg、apache2（或 nginx）、reprepro 工具，可通过 sudo apt install gpg reprepro apache2 安装。",
          "qas": [
            {
              "question": "搭建本地 apt 仓库需要哪些工具？",
              "id": "5-202-3",
              "answers": [
                {
                  "text": "gpg、apache2（或 nginx）、reprepro",
                  "answer_start": 0
                }
              ]
            },
            {
              "question": "如何安装搭建本地 apt 仓库所需的工具？",
              "id": "5-202-4",
              "answers": [
                {
                  "text": "sudo apt install gpg reprepro apache2",
                  "answer_start": 52
                }
              ]
            }
          ]
        },
        {
          "context": "使用 gpg 生成密钥对的命令：gpg --full-gen-key；查看公钥：gpg --list-keys；查看私钥：gpg --list-secret-keys。",
          "qas": [
            {
              "question": "如何使用 gpg 生成密钥对？",
              "id": "5-202-5",
              "answers": [
                {
                  "text": "gpg --full-gen-key",
                  "answer_start": 0
                }
              ]
            },
            {
              "question": "查看 gpg 公钥的命令是什么？",
              "id": "5-202-6",
              "answers": [
                {
                  "text": "gpg --list-keys",
                  "answer_start": 34
                }
              ]
            },
            {
              "question": "如何查看 gpg 私钥？",
              "id": "5-202-7",
              "answers": [
                {
                  "text": "gpg --list-secret-keys",
                  "answer_start": 54
                }
              ]
            }
          ]
        },
        {
          "context": "Apache2 的 http 服务目录默认是 /var/www/html，需删除默认 index.html，创建 repo 目录及其中的 conf 目录，再创建 conf/distributions 和 conf/options 文件。",
          "qas": [
            {
              "question": "Apache2 的默认 http 服务目录是什么？",
              "id": "5-202-8",
              "answers": [
                {
                  "text": "/var/www/html",
                  "answer_start": 23
                }
              ]
            },
            {
              "question": "在 Apache2 服务目录下创建 apt 仓库相关目录和文件的步骤是什么？",
              "id": "5-202-9",
              "answers": [
                {
                  "text": "删除默认 index.html，创建 repo 目录及其中的 conf 目录，再创建 conf/distributions 和 conf/options 文件。",
                  "answer_start": 45
                }
              ]
            }
          ]
        },
        {
          "context": "distributions 文件中，Architectures 表示仓库支持的系统架构及是否支持源码包；Components 包含 main、contrib、non-free；SignWith 用于指定 gpg 签名密钥。",
          "qas": [
            {
              "question": "distributions 文件中 Architectures 的作用是什么？",
              "id": "5-202-10",
              "answers": [
                {
                  "text": "表示该仓库支持那些系统架构的包，以及是否支持源码包",
                  "answer_start": 0
                }
              ]
            },
            {
              "question": "distributions 文件的 Components 包含哪些内容？",
              "id": "5-202-11",
              "answers": [
                {
                  "text": "main contrib non-free",
                  "answer_start": 83
                }
              ]
            },
            {
              "question": "distributions 文件中 SignWith 的作用是什么？",
              "id": "5-202-12",
              "answers": [
                {
                  "text": "使用一个 gpg 密钥来签名",
                  "answer_start": 110
                }
              ]
            }
          ]
        },
        {
          "context": "options 文件可配置 verbose 和 basedir /var/www/html/repo。",
          "qas": [
            {
              "question": "options 文件可以配置哪些内容？",
              "id": "5-202-13",
              "answers": [
                {
                  "text": "verbose；basedir /var/www/html/repo",
                  "answer_start": 0
                }
              ]
            }
          ]
        },
        {
          "context": "使用 reprepro 导入 deb 包命令：reprepro -C main -b . includedeb dde-sid <deb包路径>；导入源码包：reprepro includedsc dde-sid <dsc文件路径>。",
          "qas": [
            {
              "question": "如何使用 reprepro 导入 deb 包？",
              "id": "5-202-14",
              "answers": [
                {
                  "text": "reprepro -C main -b . includedeb dde-sid <deb包路径>",
                  "answer_start": 0
                }
              ]
            },
            {
              "question": "导入源码包使用什么 reprepro 命令？",
              "id": "5-202-15",
              "answers": [
                {
                  "text": "reprepro includedsc dde-sid <dsc文件路径>",
                  "answer_start": 68
                }
              ]
            }
          ]
        },
        {
          "context": "配置 Apache 服务需编辑 /etc/apache2/apache2.conf，添加对 /var/www/html/repo/db/ 和 /var/www/html/repo/conf/ 的访问限制，然后重启 apache2 服务：systemctl restart apache2.service。",
          "qas": [
            {
              "question": "如何配置 Apache 服务禁止访问 db 和 conf 目录？",
              "id": "5-202-16",
              "answers": [
                {
                  "text": "编辑 /etc/apache2/apache2.conf，添加对 /var/www/html/repo/db/ 和 /var/www/html/repo/conf/ 的访问限制。",
                  "answer_start": 0
                }
              ]
            },
            {
              "question": "配置 Apache 后如何重启服务？",
              "id": "5-202-17",
              "answers": [
                {
                  "text": "systemctl restart apache2.service",
                  "answer_start": 146
                }
              ]
            }
          ]
        },
        {
          "context": "导出 gpg key 命令：gpg --armor --output claystan.gpg.key --export。",
          "qas": [
            {
              "question": "如何导出 gpg key？",
              "id": "5-202-18",
              "answers": [
                {
                  "text": "gpg --armor --output claystan.gpg.key --export",
                  "answer_start": 0
                }
              ]
            }
          ]
        },
        {
          "context": "他人使用仓库需下载并添加 gpg key：wget --no-check-certificate -qO - http://<youraddress>/repo/claystan.gpg.key| sudo apt-key add -，并配置 sources.list 添加仓库地址。",
          "qas": [
            {
              "question": "他人如何添加仓库的 gpg key？",
              "id": "5-202-19",
              "answers": [
                {
                  "text": "wget --no-check-certificate -qO - http://<youraddress>/repo/claystan.gpg.key| sudo apt-key add -",
                  "answer_start": 0
                }
              ]
            },
            {
              "question": "他人使用仓库需要配置什么文件？",
              "id": "5-202-20",
              "answers": [
                {
                  "text": "/etc/apt/sources.list",
                  "answer_start": 134
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
