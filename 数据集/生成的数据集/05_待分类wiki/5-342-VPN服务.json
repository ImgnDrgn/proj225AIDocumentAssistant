{
  "data": [
    {
      "title": "VPN服务",
      "paragraphs": [
        {
          "context": "VPN服务安装pptpd时，需在终端执行命令：sudo apt-get install pptpd",
          "qas": [
            {
              "id": "5-342-1",
              "question": "安装pptpd的终端执行命令是什么？",
              "answers": [
                {
                  "text": "sudo apt-get install pptpd",
                  "answer_start": 27
                }
              ]
            }
          ]
        },
        {
          "context": "编辑VPN服务的pptpd主配置文件时，终端执行命令：sudo gedit /etc/pptpd.conf，且需修改为：option /etc/ppp/pptpd-options、localip 192.168.0.1、remoteip 192.168.0.11-150",
          "qas": [
            {
              "id": "5-342-2",
              "question": "编辑pptpd主配置文件的终端命令是什么？",
              "answers": [
                {
                  "text": "sudo gedit /etc/pptpd.conf",
                  "answer_start": 25
                }
              ]
            },
            {
              "id": "5-342-3",
              "question": "/etc/pptpd.conf文件需修改为哪些内容？",
              "answers": [
                {
                  "text": "option /etc/ppp/pptpd-options\nlocalip 192.168.0.1\nremoteip 192.168.0.11-150",
                  "answer_start": 56
                }
              ]
            }
          ]
        },
        {
          "context": "编辑VPN服务的pptpd-options配置文件时，终端执行命令：sudo gedit /etc/ppp/pptpd-options，需将ms-dns项修改为8.8.8.8和8.8.4.4（也可使用ISP提供的DNS）",
          "qas": [
            {
              "id": "5-342-4",
              "question": "编辑pptpd-options配置文件的终端命令是什么？",
              "answers": [
                {
                  "text": "sudo gedit /etc/ppp/pptpd-options",
                  "answer_start": 28
                }
              ]
            },
            {
              "id": "5-342-5",
              "question": "pptpd-options配置文件中的ms-dns项应修改为哪些地址？",
              "answers": [
                {
                  "text": "8.8.8.8 和 8.8.4.4（也可使用ISP提供的DNS）",
                  "answer_start": 65
                }
              ]
            }
          ]
        },
        {
          "context": "定义VPN登录用户名和密码的配置文件为/etc/ppp/chap-secrets，编辑该文件的终端命令为sudo gedit /etc/ppp/chap-secrets，添加内容需遵循格式：\"用户名\" pptpd \"密码\" *",
          "qas": [
            {
              "id": "5-342-6",
              "question": "定义VPN登录用户名和密码的配置文件路径是什么？",
              "answers": [
                {
                  "text": "/etc/ppp/chap-secrets",
                  "answer_start": 26
                }
              ]
            },
            {
              "id": "5-342-7",
              "question": "编辑chap-secrets配置文件的终端命令是什么？",
              "answers": [
                {
                  "text": "sudo gedit /etc/ppp/chap-secrets",
                  "answer_start": 42
                }
              ]
            },
            {
              "id": "5-342-8",
              "question": "在chap-secrets文件中添加用户名和密码需遵循什么格式？",
              "answers": [
                {
                  "text": "\"用户名\" pptpd \"密码\" *",
                  "answer_start": 85
                }
              ]
            }
          ]
        },
        {
          "context": "修改VPN服务的pptpd相关配置后，需重启pptpd进程使配置生效，终端执行命令：/etc/init.d/pptpd restart",
          "qas": [
            {
              "id": "5-342-9",
              "question": "修改pptpd相关配置后，重启pptpd进程的终端命令是什么？",
              "answers": [
                {
                  "text": "/etc/init.d/pptpd restart",
                  "answer_start": 45
                }
              ]
            }
          ]
        },
        {
          "context": "检验PPTP服务器是否运行的终端命令为sudo netstat -anp | grep pptpd，运行成功时会得到类似结果：tcp  0  0  0.0.0.0:1723 0.0.0.0:*  LISTEN  27243/pptpd、unix  2  [ ]  数据报  200719  27243/pptpd",
          "qas": [
            {
              "id": "5-342-10",
              "question": "检验PPTP服务器是否运行的终端命令是什么？",
              "answers": [
                {
                  "text": "sudo netstat -anp | grep pptpd",
                  "answer_start": 24
                }
              ]
            },
            {
              "id": "5-342-11",
              "question": "PPTP服务器运行成功时，执行检验命令会得到哪些类似结果？",
              "answers": [
                {
                  "text": "tcp  0  0  0.0.0.0:1723 0.0.0.0:*  LISTEN  27243/pptpd\nunix  2  [ ]  数据报  200719  27243/pptpd",
                  "answer_start": 61
                }
              ]
            }
          ]
        },
        {
          "context": "为使客户端顺利连接VPN服务器，需开放默认VPN端口1723，终端执行iptables命令：sudo iptables -I INPUT -p tcp --dport 1723 -j ACCEPT",
          "qas": [
            {
              "id": "5-342-12",
              "question": "开放VPN默认端口（1723）的终端iptables命令是什么？",
              "answers": [
                {
                  "text": "sudo iptables -I INPUT -p tcp --dport 1723 -j ACCEPT",
                  "answer_start": 42
                }
              ]
            }
          ]
        },
        {
          "context": "开启VPN服务的ipv4转发功能，需先查看/proc/sys/net/ipv4/ip_forward文件值是否为1；若否，修改/etc/sysctl.conf文件为net.ipv4.ip_forward = 1，再执行sysctl -p和/etc/init.d/procps restart使其生效",
          "qas": [
            {
              "id": "5-342-13",
              "question": "查看ipv4转发功能状态的文件路径是什么？",
              "answers": [
                {
                  "text": "/proc/sys/net/ipv4/ip_forward",
                  "answer_start": 23
                }
              ]
            },
            {
              "id": "5-342-14",
              "question": "如何开启ipv4转发功能并使其生效？",
              "answers": [
                {
                  "text": "修改/etc/sysctl.conf文件为net.ipv4.ip_forward = 1，再执行sysctl -p和/etc/init.d/procps restart",
                  "answer_start": 46
                }
              ]
            }
          ]
        },
        {
          "context": "为VPN客户端IP设置网络地址转换（NAT）的iptables命令为sudo iptables --table nat --append POSTROUTING --out-interface eth0 --jump MASQUERADE，其中“eth0”需选择对应网卡",
          "qas": [
            {
              "id": "5-342-15",
              "question": "为VPN客户端IP设置NAT的iptables命令是什么？",
              "answers": [
                {
                  "text": "sudo iptables --table nat --append POSTROUTING --out-interface eth0 --jump MASQUERADE",
                  "answer_start": 32
                }
              ]
            },
            {
              "id": "5-342-16",
              "question": "配置NAT的iptables命令中，“eth0”需要注意什么？",
              "answers": [
                {
                  "text": "要选择对应的网卡",
                  "answer_start": 112
                }
              ]
            }
          ]
        },
        {
          "context": "Windows连接VPN出现网站连接异常时，需设置最大MTU，终端执行iptables命令：sudo iptables -I FORWARD -p tcp --syn -i ppp+ -j TCPMSS --set-mss 1356",
          "qas": [
            {
              "id": "5-342-17",
              "question": "Windows连接VPN出现网站连接异常时，设置最大MTU的iptables命令是什么？",
              "answers": [
                {
                  "text": "sudo iptables -I FORWARD -p tcp --syn -i ppp+ -j TCPMSS --set-mss 1356",
                  "answer_start": 45
                }
              ]
            }
          ]
        },
        {
          "context": "通过编辑rc.local保存iptables规则（避免重启丢失），终端执行命令sudo gedit /etc/rc.local，需在文件末尾添加：iptables --table nat --append POSTROUTING --out-interface eth0 --jump MASQUERADE、iptables -I FORWARD -p tcp --syn -i ppp+ -j TCPMSS --set-mss 1356",
          "qas": [
            {
              "id": "5-342-18",
              "question": "编辑rc.local文件保存iptables规则的终端命令是什么？",
              "answers": [
                {
                  "text": "sudo gedit /etc/rc.local",
                  "answer_start": 35
                }
              ]
            },
            {
              "id": "5-342-19",
              "question": "需在rc.local文件末尾添加哪些命令以保存iptables规则？",
              "answers": [
                {
                  "text": "iptables --table nat --append POSTROUTING --out-interface eth0 --jump MASQUERADE\niptables -I FORWARD -p tcp --syn -i ppp+ -j TCPMSS --set-mss 1356",
                  "answer_start": 68
                }
              ]
            }
          ]
        },
        {
          "context": "使用iptables-save保存VPN的iptables规则，终端执行命令iptables-save > /etc/iptables-rules；后续需修改/etc/network/interfaces文件，在eth0设置末尾添加pre-up iptables-restore < /etc/iptables-rules（注：此方法未验证，有网友反映可能导致无法进入系统）",
          "qas": [
            {
              "id": "5-342-20",
              "question": "使用iptables-save保存iptables规则的终端命令是什么？",
              "answers": [
                {
                  "text": "iptables-save > /etc/iptables-rules",
                  "answer_start": 32
                }
              ]
            },
            {
              "id": "5-342-21",
              "question": "使用iptables-save保存规则后，如何修改/etc/network/interfaces文件以自动载入规则？",
              "answers": [
                {
                  "text": "找到eth0那一节，在对eth0的设置最末尾添加pre-up iptables-restore < /etc/iptables-rules",
                  "answer_start": 65
                }
              ]
            },
            {
              "id": "5-342-22",
              "question": "使用iptables-save保存iptables规则的方法有什么注意事项？",
              "answers": [
                {
                  "text": "此方法未验证，有网友反映使用后可能无法进入系统",
                  "answer_start": 153
                }
              ]
            }
          ]
        },
        {
          "context": "VPN服务的相关链接包括：维基百科:虚拟专用网（http://zh.wikipedia.org/wiki/%E8%99%9B%E6%93%AC%E7%A7%81%E4%BA%BA%E7%B6%B2%E8%B7%AF）、基于UBUNTU搭建VPN服务器(已验证)（http://blog.warmcolor.net/2013/06/21/%E5%9F%BA%E4%BA%8Eubuntu%E6%90%AD%E5%BB%BAvpn%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B7%B2%E9%AA%8C%E8%AF%81/）",
          "qas": [
            {
              "id": "5-342-23",
              "question": "关于“虚拟专用网”的维基百科链接是什么？",
              "answers": [
                {
                  "text": "http://zh.wikipedia.org/wiki/%E8%99%9B%E6%93%AC%E7%A7%81%E4%BA%BA%E7%B6%B2%E8%B7%AF",
                  "answer_start": 33
                }
              ]
            },
            {
              "id": "5-342-24",
              "question": "“基于UBUNTU搭建VPN服务器(已验证)”的链接是什么？",
              "answers": [
                {
                  "text": "http://blog.warmcolor.net/2013/06/21/%E5%9F%BA%E4%BA%8Eubuntu%E6%90%AD%E5%BB%BAvpn%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B7%B2%E9%AA%8C%E8%AF%81/",
                  "answer_start": 79
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}