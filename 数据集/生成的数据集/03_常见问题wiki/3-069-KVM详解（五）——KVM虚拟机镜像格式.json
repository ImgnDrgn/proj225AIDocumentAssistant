{
  "data": [
    {
      "title": "KVM详解（五）——KVM虚拟机镜像格式",
      "paragraphs": [
        {
          "context": "目前，虚拟机的主流镜像格式有raw、cow、qcow、qcow2以及vmdk。raw格式是一种很早的镜像格式，格式比较原始、简单，性能上也还不错。并且raw格式镜像的一个突出好处是它支持转换成其他格式的镜像，或者作为其他格式镜像转换的中间格式。但是，raw格式的一个突出缺点就是不支持快照。 CentOS6的虚拟机KVM和XEN默认使用raw格式。cow、qcow和qcow2是另外的镜像格式，cow格式、qcow格式目前已经逐步被qcow2格式所取代，qcow2格式是目前的一种主流镜像格式，性能上与raw格式相差无几，但是支持虚拟机快照。CentOS7的KVM虚拟机镜像默认使用qcow2格式。vmdk是Vmware虚拟的镜像格式，其整体性能非常出色，稳定性和其他方面的能力很好，也支持快照。",
          "qas": [
            {
              "id": "3-69-1",
              "question": "虚拟机的主流镜像格式有哪些？",
              "answers": [
                {
                  "text": "raw、cow、qcow、qcow2以及vmdk",
                  "answer_start": 5
                }
              ]
            },
            {
              "id": "3-69-2",
              "question": "raw格式的优点是什么？",
              "answers": [
                {
                  "text": "格式比较原始、简单，性能上也还不错，支持转换成其他格式的镜像，或者作为其他格式镜像转换的中间格式",
                  "answer_start": 27
                }
              ]
            },
            {
              "id": "3-69-3",
              "question": "raw格式的缺点是什么？",
              "answers": [
                {
                  "text": "不支持快照",
                  "answer_start": 141
                }
              ]
            },
            {
              "id": "3-69-4",
              "question": "CentOS6的KVM和XEN虚拟机默认使用什么镜像格式？",
              "answers": [
                {
                  "text": "raw格式",
                  "answer_start": 162
                }
              ]
            },
            {
              "id": "3-69-5",
              "question": "qcow2格式相比cow和qcow格式有什么特点？",
              "answers": [
                {
                  "text": "目前逐步取代cow、qcow格式，是主流镜像格式，性能与raw相差无几，支持虚拟机快照",
                  "answer_start": 196
                }
              ]
            },
            {
              "id": "3-69-6",
              "question": "CentOS7的KVM虚拟机镜像默认使用什么格式？",
              "answers": [
                {
                  "text": "qcow2格式",
                  "answer_start": 301
                }
              ]
            },
            {
              "id": "3-69-7",
              "question": "vmdk格式有什么特点？",
              "answers": [
                {
                  "text": "是Vmware虚拟的镜像格式，整体性能非常出色，稳定性和其他方面的能力很好，也支持快照",
                  "answer_start": 327
                }
              ]
            }
          ]
        },
        {
          "context": "qemu-img命令可以被用来查看虚拟机镜像格式，并对虚拟机镜像格式进行转换。qemu-img命令查看虚拟机镜像命令为：qemu-img info 【虚拟机镜像】。执行命令：qemu-img info centos7-2.img可以查看centos7-2.img的镜像格式。qemu-img进行虚拟机镜像格式转换命令为：qemu-img convert -f 【原镜像格式】 -O 【转换后】 【源虚拟机镜像】 【转换后虚拟机镜像】。该命令执行示例如下：qemu-img convert -f qcow2 -O raw centos7-2.img /var/lib/libvirt/images/centos7-2.img /var/lib/libvirt/images/centos7-2.raw，该命令用于将centos7-2的qcow2格式转换成raw格式。在完成虚拟机镜像格式转换后，还需要修改虚拟机配置文件，使得在虚拟机启动时，按照转换后的raw格式进行启动。执行命令：virsh edit centos7-2可以打开类似vi命令的编辑器，修改与启动镜像格式和启动镜像文件有关的设置。",
          "qas": [
            {
              "id": "3-69-8",
              "question": "用什么命令可以查看虚拟机镜像格式？",
              "answers": [
                {
                  "text": "qemu-img info 【虚拟机镜像】",
                  "answer_start": 44
                }
              ]
            },
            {
              "id": "3-69-9",
              "question": "qemu-img转换虚拟机镜像格式的命令是什么？",
              "answers": [
                {
                  "text": "qemu-img convert -f 【原镜像格式】 -O 【转换后】 【源虚拟机镜像】 【转换后虚拟机镜像】",
                  "answer_start": 143
                }
              ]
            },
            {
              "id": "3-69-10",
              "question": "将qcow2格式转换成raw格式的命令示例是什么？",
              "answers": [
                {
                  "text": "qemu-img convert -f qcow2 -O raw centos7-2.img /var/lib/libvirt/images/centos7-2.img /var/lib/libvirt/images/centos7-2.raw",
                  "answer_start": 285
                }
              ]
            },
            {
              "id": "3-69-11",
              "question": "镜像格式转换后，需要修改什么文件？",
              "answers": [
                {
                  "text": "虚拟机配置文件",
                  "answer_start": 435
                }
              ]
            },
            {
              "id": "3-69-12",
              "question": "用什么命令可以编辑虚拟机配置文件？",
              "answers": [
                {
                  "text": "virsh edit centos7-2",
                  "answer_start": 499
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}